<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"datahonor.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.10.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":"ture"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="十年饮冰，难凉热血。">
<meta property="og:type" content="website">
<meta property="og:title" content="DATA HONOR">
<meta property="og:url" content="http://datahonor.com/archives/page/15/index.html">
<meta property="og:site_name" content="DATA HONOR">
<meta property="og:description" content="十年饮冰，难凉热血。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Mathew Shen">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://datahonor.com/archives/page/15/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"archives/page/15/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>DATA HONOR</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">DATA HONOR</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Pain Is Inevitable; Suffering Is Optional</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mathew Shen"
      src="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
  <p class="site-author-name" itemprop="name">Mathew Shen</p>
  <div class="site-description" itemprop="description">十年饮冰，难凉热血。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shenxiangzhuang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shenxiangzhuang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:datahonor@gmail.com" title="E-Mail → mailto:datahonor@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://yuanhang0.github.io/" title="https:&#x2F;&#x2F;yuanhang0.github.io&#x2F;" rel="noopener" target="_blank">Tomorrow</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://yudaer.github.io/" title="http:&#x2F;&#x2F;yudaer.github.io&#x2F;" rel="noopener" target="_blank">小白二号</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/06/The-Speed-of-Numpy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/06/The-Speed-of-Numpy/" class="post-title-link" itemprop="url">The Speed of Numpy</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-06 13:49:15" itemprop="dateCreated datePublished" datetime="2017-03-06T13:49:15+08:00">2017-03-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/06/The-Speed-of-Numpy/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/06/The-Speed-of-Numpy/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="Overview-50">Overview</h5>
<p>实现算法时，越发觉得，Numpy对效率的影响特别大，所以再次学习。<br>
这里主要是进行数组运算速度的对比，对原文代码稍加改进，更直观地看到速度上的差别。</p>
<h5 id="Code-44">Code</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">numpysum</span>(<span class="params">n</span>):</span><br><span class="line">    a = np.arange(n)**<span class="number">2</span></span><br><span class="line">    b = np.arange(n)**<span class="number">3</span></span><br><span class="line">    c  =a + b</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pythonsum</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="comment"># 这里由于源码为Python2的，range的用法可能有变</span></span><br><span class="line">    <span class="comment"># 直接运行报错TypeError: &#x27;range&#x27; object does not support item assignment</span></span><br><span class="line">    <span class="comment"># 故转化为列表</span></span><br><span class="line">    a = <span class="built_in">list</span>(<span class="built_in">range</span>(n))</span><br><span class="line">    b = <span class="built_in">list</span>(<span class="built_in">range</span>(n))</span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">        a[i] = i ** <span class="number">2</span></span><br><span class="line">        b[i] = i ** <span class="number">3</span></span><br><span class="line">        c.append(a[i] + b[i])</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"><span class="comment"># prt表示是否打印结果</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printest</span>(<span class="params">func, size, prt=<span class="literal">True</span></span>):</span><br><span class="line">    start = datetime.now()</span><br><span class="line">    c = func(size)</span><br><span class="line">    delta = datetime.now() - start</span><br><span class="line">    <span class="keyword">if</span> prt==<span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The last 2 elements of the sum &quot;</span>, c[-<span class="number">2</span>:])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Elapsed time in microsecondas &#x27;</span>, delta.microseconds)</span><br><span class="line">    <span class="keyword">return</span> delta.microseconds</span><br><span class="line"><span class="comment"># 用于作n-time图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timeplot</span>():</span><br><span class="line">    pts = []</span><br><span class="line">    x = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>, <span class="number">10000</span>, <span class="number">100</span>):</span><br><span class="line">        t_numpy = printest(numpysum, i, prt=<span class="literal">False</span>)</span><br><span class="line">        t_python = printest(pythonsum, i, prt=<span class="literal">False</span>)</span><br><span class="line">        pts.append([t_numpy, t_python])</span><br><span class="line">        x.append(i)</span><br><span class="line">    plt.plot(x, pts)</span><br><span class="line">    plt.legend([<span class="string">&#x27;Numpy&#x27;</span>, <span class="string">&#x27;Python&#x27;</span>])</span><br><span class="line">    plt.show()</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    size = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Numpysum...&#x27;</span>)</span><br><span class="line">    printest(numpysum, size)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Pythonsum...&#x27;</span>)</span><br><span class="line">    printest(pythonsum, size)</span><br><span class="line">    timeplot()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>运行：</p>
<blockquote>
<p>python <a target="_blank" rel="noopener" href="http://Speed.py">Speed.py</a> 10000</p>
</blockquote>
<p>输出：</p>
<blockquote></blockquote>
<p>Numpysum…<br>
The last 2 elements of the sum  [999500079996 999800010000]<br>
Elapsed time in microsecondas  1299<br>
Pythonsum…<br>
The last 2 elements of the sum  [999500079996, 999800010000]<br>
Elapsed time in microsecondas  18202</p>
<p><img src="http://blog-1252464519.costj.myqcloud.com/170518/Selection_051902.png" alt></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/06/The-Speed-of-Numpy/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/06/cin-and-cin-getline/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/06/cin-and-cin-getline/" class="post-title-link" itemprop="url">cin and cin.getline</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-06 09:16:12" itemprop="dateCreated datePublished" datetime="2017-03-06T09:16:12+08:00">2017-03-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cpp/" itemprop="url" rel="index"><span itemprop="name">Cpp</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/06/cin-and-cin-getline/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/06/cin-and-cin-getline/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="Overview-55">Overview</h5>
<p>关于cin与cin.getline在使用时要注意的地方，关键在于&quot;newline&quot;的处理。</p>
<h5 id="Code-48">Code</h5>
<p>我们先来看一个例子</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;What year was your house biult?\n&quot;</span>;</span><br><span class="line">        <span class="type">int</span> year;</span><br><span class="line">        cin&gt;&gt;year;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;What is its streer address?\n&quot;</span>;</span><br><span class="line">        <span class="type">char</span> address[<span class="number">80</span>];</span><br><span class="line">        cin.<span class="built_in">getline</span>(address, <span class="number">80</span>);</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;Year built: &quot;</span>&lt;&lt;year&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;Address: &quot;</span>&lt;&lt;address&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;Done!\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出:</p>
<blockquote>
<p>What year was your house biult?<br>
2017<br>
What is its streer address?<br>
Year built: 2017<br>
Address:<br>
Done!</p>
</blockquote>
<p>可以看到，还没输入地址，就打印并结束了程序。<br>
原因:</p>
<blockquote>
<p>The problem is that when cin reads the year, it leaves the newline generated by the Enter key in the input queue. Then, cin.getline() reads the newline as an empty line and assigns a null string to the address array.</p>
</blockquote>
<p>解决办法：</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/06/cin-and-cin-getline/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/05/Classifying-News-Headlines-with-scikit-learn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/05/Classifying-News-Headlines-with-scikit-learn/" class="post-title-link" itemprop="url">Classifying News Headlines with scikit-learn</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-05 09:14:46" itemprop="dateCreated datePublished" datetime="2017-03-05T09:14:46+08:00">2017-03-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/05/Classifying-News-Headlines-with-scikit-learn/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/05/Classifying-News-Headlines-with-scikit-learn/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="概览">概览</h5>
<p>Kaggle案例学习，练习使用sklearn进行新闻的分类，主要使用了朴素贝叶斯进行分类。</p>
<h5 id="学习">学习</h5>
<blockquote>
<p>学习使用正则来清洗数据<br>
掌握sklearn准备训练集和测试集的方法[LabelEncoder， train_test_split等的使用]<br>
学习使用sklearn调用朴素贝叶斯算法进行分类预测</p>
</blockquote>
<h5 id="代码">代码</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get some libraries that will be useful</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># linear algebra</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># data processing, CSV file I/O (e.g. pd.read_csv)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># the Naive Bayes model</span></span><br><span class="line"><span class="keyword">from</span> sklearn.naive_bayes <span class="keyword">import</span> MultinomialNB</span><br><span class="line"><span class="comment"># function to split the data for cross-validation</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="comment"># function for transforming documents into counts</span></span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="comment"># function for encoding categories</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># grab the data</span></span><br><span class="line">news = pd.read_csv(<span class="string">&quot;uci-news-aggregator.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># let&#x27;s take a look at our data</span></span><br><span class="line"><span class="built_in">print</span>(news.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对新闻标题的处理</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">normalize_text</span>(<span class="params">s</span>):</span><br><span class="line">    s = s.lower()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># remove punctuation that is not word-internal (e.g., hyphens, apostrophes)</span></span><br><span class="line">    s = re.sub(<span class="string">&#x27;\s\W&#x27;</span>, <span class="string">&#x27; &#x27;</span>, s)</span><br><span class="line">    s = re.sub(<span class="string">&#x27;\W\s&#x27;</span>, <span class="string">&#x27; &#x27;</span>, s)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># make sure we didn&#x27;t introduce any double spaces</span></span><br><span class="line">    s = re.sub(<span class="string">&#x27;\s+&#x27;</span>, <span class="string">&#x27; &#x27;</span>, s)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">news[<span class="string">&#x27;TEXT&#x27;</span>] = [normalize_text(s) <span class="keyword">for</span> s <span class="keyword">in</span> news[<span class="string">&#x27;TITLE&#x27;</span>]]</span><br><span class="line"><span class="built_in">print</span>(news[<span class="string">&#x27;TITLE&#x27;</span>].head())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备训练集和测试集</span></span><br><span class="line"><span class="comment"># pull the data into vectors</span></span><br><span class="line">vectorizer = CountVectorizer()</span><br><span class="line">x = vectorizer.fit_transform(news[<span class="string">&#x27;TEXT&#x27;</span>])</span><br><span class="line"></span><br><span class="line">encoder = LabelEncoder()</span><br><span class="line">y = encoder.fit_transform(news[<span class="string">&#x27;CATEGORY&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># split into train and test sets</span></span><br><span class="line">x_train, x_test, y_train, y_test = train_test_split(x, y, test_size=<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># take a look at the shape of each of these</span></span><br><span class="line"><span class="built_in">print</span>(x_train.shape)</span><br><span class="line"><span class="built_in">print</span>(y_train.shape)</span><br><span class="line"><span class="built_in">print</span>(x_test.shape)</span><br><span class="line"><span class="built_in">print</span>(y_test.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始预测</span></span><br><span class="line">nb = MultinomialNB()</span><br><span class="line">nb.fit(x_train, y_train)</span><br><span class="line"><span class="built_in">print</span>(nb.score(x_test, y_test))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="补充">补充</h5>
<p>关于正则：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">\s       Matches any whitespace character; equivalent to [ \t\n\r\f\v] in</span><br><span class="line">         bytes patterns or string patterns with the ASCII flag.</span><br><span class="line">         In string patterns without the ASCII flag, it will match the whole</span><br><span class="line">         range of Unicode whitespace characters.</span><br><span class="line">\S       Matches any non-whitespace character; equivalent to [^\s].</span><br><span class="line">\w       Matches any alphanumeric character; equivalent to [a-zA-Z0-9_]</span><br><span class="line">         in bytes patterns or string patterns with the ASCII flag.</span><br><span class="line">         In string patterns without the ASCII flag, it will match the</span><br><span class="line">         range of Unicode alphanumeric characters (letters plus digits</span><br><span class="line">         plus underscore).</span><br><span class="line">         With LOCALE, it will match the set [0-9_] plus characters defined</span><br><span class="line">         as letters for the current locale.</span><br><span class="line">\W       Matches the complement of \w.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>关于LabelEncoder:</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/05/Classifying-News-Headlines-with-scikit-learn/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/03/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E4%B8%8E%E7%BB%8F%E9%AA%8C%E9%A3%8E%E9%99%A9%E6%9C%80%E5%B0%8F%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/03/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E4%B8%8E%E7%BB%8F%E9%AA%8C%E9%A3%8E%E9%99%A9%E6%9C%80%E5%B0%8F%E5%8C%96/" class="post-title-link" itemprop="url">最大似然估计与经验风险最小化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-03 13:39:39" itemprop="dateCreated datePublished" datetime="2017-03-03T13:39:39+08:00">2017-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">统计学习方法</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/03/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E4%B8%8E%E7%BB%8F%E9%AA%8C%E9%A3%8E%E9%99%A9%E6%9C%80%E5%B0%8F%E5%8C%96/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/03/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E4%B8%8E%E7%BB%8F%E9%AA%8C%E9%A3%8E%E9%99%A9%E6%9C%80%E5%B0%8F%E5%8C%96/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>李航老师《统计学习方法》第一章笔记——经验风险最小化推导极大似然估计</p>
<p>题目：当模型是条件概率分布，损失函数是对数损失函数时，经验风险最小化就等价于极大似然估计</p>
<p>1.1预备知识——统计学习三要素</p>
<p>模型的假设空间，模型选择的标准以及模型学习的算法是统计学习方法的三要素。</p>
<p>简记为： 方法 = 模型+策略+算法</p>
<p>1.2.预备知识——损失函数</p>
<p>在模型的假设空间，我们要确定一定的准则来确定模型的好坏，即我们需要确定一定的策略[三要素之一]去衡量，所以我们引入了损失函数[loss function]或代价函数[cost function].</p>
<p>损失函数有很多种，例如0-1损失函数， 平方损失函数等，这里我们要用的是对数损失函数。<br>
$$L(Y, P(Y | X)) = - \log P(Y | X)$$</p>
<p>1.3.预备知识——风险函数</p>
<p>选定损失函数后，其值越小，模型就越好。模型的输入与输出(X, Y)是随机变量，遵循联合分布P（X, Y）， 所以损失函数的期望为:</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/03/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E4%B8%8E%E7%BB%8F%E9%AA%8C%E9%A3%8E%E9%99%A9%E6%9C%80%E5%B0%8F%E5%8C%96/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/" class="post-title-link" itemprop="url">感知机学习算法的对偶形式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-03 13:19:21" itemprop="dateCreated datePublished" datetime="2017-03-03T13:19:21+08:00">2017-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>李航老师《统计学习方法》第二章笔记。<br>
关于感知机学习算法对偶形式的简单实现[ Python ]。<br>
之前有<a href="http://datahonor.com/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/#more">原始感知机学习算法</a>的实现。</p>
<h5 id="算法原理-2">算法原理</h5>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/21.png" alt></p>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/22.png" alt></p>
<h5 id="算法实现-2">算法实现</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S1--&gt;随机生成训练集并标注</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train matrix</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_train_data</span>():</span><br><span class="line">    M1 = np.random.random((<span class="number">100</span>, <span class="number">2</span>))</span><br><span class="line">    M11 = np.column_stack((M1, np.ones(<span class="number">100</span>)))</span><br><span class="line"></span><br><span class="line">    M2 = np.random.random((<span class="number">100</span>, <span class="number">2</span>)) - <span class="number">0.7</span></span><br><span class="line">    M22 = np.column_stack((M2, np.ones(<span class="number">100</span>) * (-<span class="number">1</span>)))</span><br><span class="line">    <span class="comment"># 合并两类，并将位置索引加到最后</span></span><br><span class="line">    MA = np.vstack((M11, M22))</span><br><span class="line">    MA = np.column_stack((MA, <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">200</span>)))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 作图操作</span></span><br><span class="line">    plt.plot(M1[:, <span class="number">0</span>], M1[:, <span class="number">1</span>], <span class="string">&#x27;ro&#x27;</span>)</span><br><span class="line">    plt.plot(M2[:, <span class="number">0</span>], M2[:, <span class="number">1</span>], <span class="string">&#x27;go&#x27;</span>)</span><br><span class="line">    <span class="comment"># 为了美观，根据数据点限制之后分类线的范围</span></span><br><span class="line">    min_x = np.<span class="built_in">min</span>(M2)</span><br><span class="line">    max_x = np.<span class="built_in">max</span>(M1)</span><br><span class="line">    <span class="comment"># 分隔x,方便作图</span></span><br><span class="line">    x = np.linspace(min_x, max_x, <span class="number">100</span>)</span><br><span class="line">    <span class="comment"># 此处返回 x 是为了之后作图方便</span></span><br><span class="line">    <span class="keyword">return</span> MA, x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S2--&gt;GRAM计算</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_gram</span>(<span class="params">MA</span>):</span><br><span class="line">    GRAM = np.empty(shape=(<span class="number">200</span>, <span class="number">200</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(MA)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(MA)):</span><br><span class="line">            GRAM[i, j] = np.dot(MA[i,][:<span class="number">2</span>], MA[j,][:<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">return</span> GRAM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S3--&gt;训练模型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型实现</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">alpha, b, xi, yi, yN, index, GRAM</span>):</span><br><span class="line">    pa1 = alpha * yN</span><br><span class="line">    pa2 = GRAM[:, index]</span><br><span class="line">    num = yi * (np.dot(pa1, pa2) + b)</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练training data</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">MA, alpha, b, GRAM, yN</span>):</span><br><span class="line">    <span class="comment"># M 存储每次处理后依旧处于误分类的原始数据</span></span><br><span class="line">    M = []</span><br><span class="line">    <span class="keyword">for</span> sample <span class="keyword">in</span> MA:</span><br><span class="line">        xi = sample[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">        yi = sample[-<span class="number">2</span>]</span><br><span class="line">        index = <span class="built_in">int</span>(sample[-<span class="number">1</span>])</span><br><span class="line">        <span class="comment"># 如果为误分类，改变alpha,b</span></span><br><span class="line">        <span class="comment"># n 为学习率</span></span><br><span class="line">        <span class="keyword">if</span> func(alpha, b, xi, yi, yN, index, GRAM) &lt;= <span class="number">0</span>:</span><br><span class="line">            alpha[index] += n</span><br><span class="line">            b += n * yi</span><br><span class="line">            M.append(sample)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(M) &gt; <span class="number">0</span>:</span><br><span class="line">        train(M, alpha, b, GRAM, yN)</span><br><span class="line">    <span class="keyword">return</span> alpha, b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 作出分类线的图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_classify</span>(<span class="params">w, b, x, rate0</span>):</span><br><span class="line">    y = (w[<span class="number">0</span>] * x + b) / ((-<span class="number">1</span>) * w[<span class="number">1</span>])</span><br><span class="line">    plt.plot(x, y)</span><br><span class="line">    plt.title(<span class="string">&#x27;Accuracy = &#x27;</span> + <span class="built_in">str</span>(rate0))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S4--&gt;生成测试集并测试模型准确性</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机生成testing data 并作图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_test_data</span>():</span><br><span class="line">    M = np.random.random((<span class="number">50</span>, <span class="number">2</span>))</span><br><span class="line">    plt.plot(M[:, <span class="number">0</span>], M[:, <span class="number">1</span>], <span class="string">&#x27;*y&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> M</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对传入的testing data 的单个样本进行分类</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params">w, b, test_i</span>):</span><br><span class="line">    <span class="keyword">if</span> np.sign(np.dot(w, test_i) + b) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据，返回正确率</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">w, b, test_data</span>):</span><br><span class="line">    right_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> test_i <span class="keyword">in</span> test_data:</span><br><span class="line">        classx = classify(w, b, test_i)</span><br><span class="line">        <span class="keyword">if</span> classx == <span class="number">1</span>:</span><br><span class="line">            right_count += <span class="number">1</span></span><br><span class="line">    rate = right_count / <span class="built_in">len</span>(test_data)</span><br><span class="line">    <span class="keyword">return</span> rate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 作出学习率——准确率的图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_n_rate</span>(<span class="params">rate_l</span>):</span><br><span class="line">    <span class="comment"># plot n-rate</span></span><br><span class="line">    n_l = <span class="built_in">sorted</span>([<span class="built_in">float</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> rate_l.keys()])</span><br><span class="line">    y = [<span class="built_in">float</span>(rate_l[n_l[i]]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(n_l))]</span><br><span class="line">    <span class="built_in">print</span>(n_l, <span class="string">&#x27;\n&#x27;</span>, y)</span><br><span class="line">    plt.plot(n_l, y, <span class="string">&#x27;ro-&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&quot;n-accuracy&quot;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    MA, x = get_train_data()</span><br><span class="line">    test_data = get_test_data()</span><br><span class="line">    GRAM = get_gram(MA)</span><br><span class="line">    yN = MA[:, <span class="number">2</span>]</span><br><span class="line">    xN = MA[:, <span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">    <span class="comment"># 定义初始值</span></span><br><span class="line">    alpha = [<span class="number">0</span>] * <span class="number">200</span></span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    <span class="comment"># 初始化最优的正确率</span></span><br><span class="line">    rate0 = <span class="number">0</span></span><br><span class="line">    rate_l = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#    print(alpha,b)</span></span><br><span class="line">    <span class="comment">#    循环不同的学习率n,寻求最优的学习率，即最终的rate0</span></span><br><span class="line">    <span class="comment">#    w0,b0为对应的最优参数</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> np.linspace(<span class="number">0.01</span>, <span class="number">1</span>, <span class="number">1000</span>):</span><br><span class="line">        n = i</span><br><span class="line">        alpha, b = train(MA, alpha, b, GRAM, yN)</span><br><span class="line">        alphap = np.column_stack((alpha * yN, alpha * yN))</span><br><span class="line">        w = <span class="built_in">sum</span>(alphap * xN)</span><br><span class="line">        rate = test(w, b, test_data)</span><br><span class="line">        <span class="comment"># print(w,b)</span></span><br><span class="line">        rate = test(w, b, test_data)</span><br><span class="line">        <span class="keyword">if</span> rate &gt; rate0:</span><br><span class="line">            rate_l[n] = rate</span><br><span class="line">            rate0 = rate</span><br><span class="line">            w0 = w</span><br><span class="line">            b0 = b</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Until now, the best result of the accuracy on test data is &#x27;</span> + <span class="built_in">str</span>(rate))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;with w=&#x27;</span> + <span class="built_in">str</span>(w0) + <span class="string">&#x27; b=&#x27;</span> + <span class="built_in">str</span>(b0))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;n=&quot;</span>, n)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------&#x27;</span>)</span><br><span class="line">            <span class="comment">#     在选定最优的学习率后，作图</span></span><br><span class="line">    plot_classify(w0, b0, x, rate0)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 作出学习率——准确率的图</span></span><br><span class="line">    plot_n_rate(rate_l)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出：<br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/23.png" alt></p>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/24.png" alt></p>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/25.png" alt></p>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/" class="post-title-link" itemprop="url">原始感知机模型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-03 13:09:30" itemprop="dateCreated datePublished" datetime="2017-03-03T13:09:30+08:00">2017-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>李航老师《统计学习方法》第二章笔记。<br>
关于原始感知机学习算法的简单实现[ Python ]。<br>
之后有<a href="http://datahonor.com/2017/03/03/%E6%84%9F%E7%9F%A5%E6%9C%BA%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%9A%84%E5%AF%B9%E5%81%B6%E5%BD%A2%E5%BC%8F/#more">感知机的对偶形式</a>的实现。</p>
<h5 id="算法原理">算法原理</h5>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/1.png" alt></p>
<h5 id="算法实现">算法实现</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S1--&gt;随机生成训练集并标注</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train matrix</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_train_data</span>():</span><br><span class="line"></span><br><span class="line">    M1 = np.random.random((<span class="number">100</span>, <span class="number">2</span>))</span><br><span class="line">    M11 = np.column_stack((M1, np.ones(<span class="number">100</span>)))</span><br><span class="line"></span><br><span class="line">    M2 = np.random.random((<span class="number">100</span>, <span class="number">2</span>)) - <span class="number">0.7</span></span><br><span class="line">    M22 = np.column_stack((M2, np.ones(<span class="number">100</span>) * (-<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">    MA = np.vstack((M11, M22))</span><br><span class="line"></span><br><span class="line">    plt.plot(M1[:, <span class="number">0</span>], M1[:, <span class="number">1</span>], <span class="string">&#x27;ro&#x27;</span>)</span><br><span class="line">    plt.plot(M2[:, <span class="number">0</span>], M2[:, <span class="number">1</span>], <span class="string">&#x27;go&#x27;</span>)</span><br><span class="line">    min_x = np.<span class="built_in">min</span>(M2)</span><br><span class="line">    max_x = np.<span class="built_in">max</span>(M1)</span><br><span class="line">    <span class="comment"># 此处返回 x 是为了之后作图方便</span></span><br><span class="line">    x = np.linspace(min_x, max_x, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> MA, x</span><br><span class="line"></span><br><span class="line"><span class="comment"># S2--&gt;原始感知机模型的训练及做图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 感知机模型:f(x) = sign(w*x+b)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">w, b, xi, yi</span>):</span><br><span class="line">    num = yi * (np.dot(w, xi) + b)</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"></span><br><span class="line"><span class="comment"># 训练training data</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">MA, w, b</span>):</span><br><span class="line">    <span class="comment"># M 存储每次处理后依旧处于误分类的原始数据</span></span><br><span class="line">    M = []</span><br><span class="line">    <span class="keyword">for</span> sample <span class="keyword">in</span> MA:</span><br><span class="line">        xi = sample[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">        yi = sample[-<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># 如果为误分类，更新w, b</span></span><br><span class="line">        <span class="comment"># n 为学习率</span></span><br><span class="line">        <span class="keyword">if</span> func(w, b, xi, yi) &lt;= <span class="number">0</span>:</span><br><span class="line">            w += n * yi * xi</span><br><span class="line">            b += n * yi</span><br><span class="line">            M.append(sample)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(M) &gt; <span class="number">0</span>:</span><br><span class="line">        train(M, w, b)</span><br><span class="line">    <span class="keyword">return</span> w, b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 作出分类线的图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_classify</span>(<span class="params">w, b, x, rate0</span>):</span><br><span class="line">    y = (w[<span class="number">0</span>] * x + b) / ((-<span class="number">1</span>) * w[<span class="number">1</span>])</span><br><span class="line">    plt.plot(x, y)</span><br><span class="line">    plt.title(<span class="string">&#x27;Accuracy = &#x27;</span> + <span class="built_in">str</span>(rate0))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># S3--&gt;随机生成测试集，并测试模型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机生成testing data 并作图</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_test_data</span>():</span><br><span class="line">    M = np.random.random((<span class="number">50</span>, <span class="number">2</span>))</span><br><span class="line">    plt.plot(M[:, <span class="number">0</span>], M[:, <span class="number">1</span>], <span class="string">&#x27;*y&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对传入的testing data 的单个样本进行分类</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">classify</span>(<span class="params">w, b, test_i</span>):</span><br><span class="line">    <span class="keyword">if</span> np.sign(np.dot(w, test_i) + b) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试数据，返回正确率</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">w, b, test_data</span>):</span><br><span class="line">    right_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> test_i <span class="keyword">in</span> test_data:</span><br><span class="line">        classx = classify(w, b, test_i)</span><br><span class="line">        <span class="keyword">if</span> classx == <span class="number">1</span>:</span><br><span class="line">            right_count += <span class="number">1</span></span><br><span class="line">    rate = right_count / <span class="built_in">len</span>(test_data)</span><br><span class="line">    <span class="keyword">return</span> rate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_n_rate</span>(<span class="params">rate_l</span>):</span><br><span class="line">    <span class="comment"># plot n-rate</span></span><br><span class="line">    n_l = <span class="built_in">sorted</span>([<span class="built_in">float</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> rate_l.keys()])</span><br><span class="line">    y = [<span class="built_in">float</span>(rate_l[n_l[i]]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(n_l))]</span><br><span class="line">    <span class="built_in">print</span>(n_l, <span class="string">&#x27;\n&#x27;</span>, y)</span><br><span class="line">    plt.plot(n_l, y, <span class="string">&#x27;ro-&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&quot;n-accuracy&quot;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    MA, x = get_train_data()</span><br><span class="line">    test_data = get_test_data()</span><br><span class="line">    <span class="comment"># 定义初始的w,b</span></span><br><span class="line">    w = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 初始化最优的正确率</span></span><br><span class="line">    rate0 = <span class="number">0</span></span><br><span class="line">    <span class="comment"># rate_l 记录学习率的更新</span></span><br><span class="line">    rate_l = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 循环不同的学习率n,寻求最优的学习率，即最终的rate0</span></span><br><span class="line">    <span class="comment"># w0,b0为对应的最优参数</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> np.linspace(<span class="number">0.01</span>, <span class="number">1</span>, <span class="number">1000</span>):</span><br><span class="line">        n = i</span><br><span class="line">        w, b = train(MA, w, b)</span><br><span class="line">        <span class="comment"># print(w,b)</span></span><br><span class="line">        rate = test(w, b, test_data)</span><br><span class="line">        <span class="keyword">if</span> rate &gt;= rate0:</span><br><span class="line">            rate_l[n] = rate</span><br><span class="line">            rate0 = rate</span><br><span class="line">            w0 = w</span><br><span class="line">            b0 = b</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Until now, the best result of the accuracy on test data is &#x27;</span> + <span class="built_in">str</span>(rate))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;with w=&#x27;</span> + <span class="built_in">str</span>(w0) + <span class="string">&#x27; b=&#x27;</span> + <span class="built_in">str</span>(b0))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;n=&quot;</span>, n)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;---------------------------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 在选定最优的学习率后，作图</span></span><br><span class="line">    plot_classify(w0, b0, x, rate0)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 作出学习率——准确率的图</span></span><br><span class="line">    plot_n_rate(rate_l)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出：<br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/2.png" alt></p>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/3.png" alt></p>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch2/4.png" alt></p>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/03/%E5%8E%9F%E5%A7%8B%E6%84%9F%E7%9F%A5%E6%9C%BA%E6%A8%A1%E5%9E%8B/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/03/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/03/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">朴素贝叶斯算法的简单实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-03 12:38:48" itemprop="dateCreated datePublished" datetime="2017-03-03T12:38:48+08:00">2017-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/03/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/03/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>李航老师，《统计学习方法》第四章，朴素贝叶斯算法笔记。</p>
<h5 id="算法原理-3">算法原理</h5>
<h6 id="极大似然估计">极大似然估计</h6>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch4/Screenshot%20from%202017-03-03%2012-38-53.png" alt></p>
<h6 id="贝叶斯估计">贝叶斯估计</h6>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/ch4/Screenshot%20from%202017-03-03%2012-46-57.png" alt></p>
<p>如上所述，在lambda = 0时，贝叶斯估计就等价于极大似然估计。</p>
<h5 id="Python实现">Python实现</h5>
<blockquote>
<p>这里用的是<a target="_blank" rel="noopener" href="http://download.csdn.net/detail/zouxy09/6610571">数字手写体</a>的数据，之前在<a href="http://datahonor.com/2017/03/02/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%E2%80%94%E2%80%94%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0KNN-Python/">KNN</a>也用到过。</p>
</blockquote>
<h6 id="手动实现算法">手动实现算法</h6>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/03/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/02/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95-Gradient-Descent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/02/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95-Gradient-Descent/" class="post-title-link" itemprop="url">梯度下降法[Gradient Descent]</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-02 17:31:38" itemprop="dateCreated datePublished" datetime="2017-03-02T17:31:38+08:00">2017-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/02/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95-Gradient-Descent/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/02/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95-Gradient-Descent/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>初步认识梯度下降这一算法，认识并分析其优缺点以更好地利用此算法。</p>
<h5 id="简介wiki">简介<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95">wiki</a></h5>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/1.png" alt></p>
<h5 id="描述">描述</h5>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/2.png" alt><br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/3.png" alt><br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/4.png" alt></p>
<h5 id="线性回归的应用">线性回归的应用</h5>
<p>参考<a target="_blank" rel="noopener" href="https://github.com/mattnedrich/GradientDescentExample">这里</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># y = mx + b</span></span><br><span class="line"><span class="comment"># m is slope, b is y-intercept</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_error_for_line_given_points</span>(<span class="params">b, m, points</span>):</span><br><span class="line">    totalError = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(points)):</span><br><span class="line">        x = points[i, <span class="number">0</span>]</span><br><span class="line">        y = points[i, <span class="number">1</span>]</span><br><span class="line">        totalError += (y - (m * x + b)) ** <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> totalError / <span class="built_in">float</span>(<span class="built_in">len</span>(points))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">step_gradient</span>(<span class="params">b_current, m_current, points, learningRate</span>):</span><br><span class="line">    b_gradient = <span class="number">0</span></span><br><span class="line">    m_gradient = <span class="number">0</span></span><br><span class="line">    N = <span class="built_in">float</span>(<span class="built_in">len</span>(points))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(points)):</span><br><span class="line">        x = points[i, <span class="number">0</span>]</span><br><span class="line">        y = points[i, <span class="number">1</span>]</span><br><span class="line">        b_gradient += -(<span class="number">2</span>/N) * (y - ((m_current * x) + b_current))</span><br><span class="line">        m_gradient += -(<span class="number">2</span>/N) * x * (y - ((m_current * x) + b_current))</span><br><span class="line">    new_b = b_current - (learningRate * b_gradient)</span><br><span class="line">    new_m = m_current - (learningRate * m_gradient)</span><br><span class="line">    <span class="keyword">return</span> [new_b, new_m]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gradient_descent_runner</span>(<span class="params">points, starting_b, starting_m, learning_rate, num_iterations</span>):</span><br><span class="line">    b = starting_b</span><br><span class="line">    m = starting_m</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_iterations):</span><br><span class="line">        b, m = step_gradient(b, m, array(points), learning_rate)</span><br><span class="line">    <span class="keyword">return</span> [b, m]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    points = genfromtxt(<span class="string">&quot;data.csv&quot;</span>, delimiter=<span class="string">&quot;,&quot;</span>)</span><br><span class="line">    learning_rate = <span class="number">0.0001</span></span><br><span class="line">    initial_b = <span class="number">0</span> <span class="comment"># initial y-intercept guess</span></span><br><span class="line">    initial_m = <span class="number">0</span> <span class="comment"># initial slope guess</span></span><br><span class="line">    num_iterations = <span class="number">1000</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Starting gradient descent at b = &#123;0&#125;, m = &#123;1&#125;, error = &#123;2&#125;&quot;</span>.<span class="built_in">format</span>(initial_b, initial_m, compute_error_for_line_given_points(initial_b, initial_m, points)))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Running...&quot;</span>)</span><br><span class="line">    [b, m] = gradient_descent_runner(points, initial_b, initial_m, learning_rate, num_iterations)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;After &#123;0&#125; iterations b = &#123;1&#125;, m = &#123;2&#125;, error = &#123;3&#125;&quot;</span>.<span class="built_in">format</span>(num_iterations, b, m, compute_error_for_line_given_points(b, m, points)))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 作图[只是为了直观地看下拟合的效果]</span></span><br><span class="line">    plt.plot([points[i,<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(points))], [points[i,<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(points))], <span class="string">&#x27;bo&#x27;</span>)</span><br><span class="line">    x = linspace(<span class="built_in">min</span>([points[i,<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(points))])-<span class="number">5</span>, <span class="built_in">max</span>([points[i,<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(points))])+<span class="number">5</span>, <span class="number">1000</span>)</span><br><span class="line">    plt.plot(x, m*x+b)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>运行结果：<br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/5.png" alt><br>
<img src="http://dataimage-1252464519.costj.myqcloud.com/images/ML/gradient/6.png" alt></p>
<h5 id="梯度下降的弊端及验证">梯度下降的弊端及验证</h5>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/02/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95-Gradient-Descent/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/02/%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E7%88%AC%E5%8F%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/02/%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E7%88%AC%E5%8F%96/" class="post-title-link" itemprop="url">豆瓣影评爬取</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-02 17:22:21" itemprop="dateCreated datePublished" datetime="2017-03-02T17:22:21+08:00">2017-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/02/%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E7%88%AC%E5%8F%96/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/02/%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E7%88%AC%E5%8F%96/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>以爬取豆瓣影评为例，抽象简单的爬取流程。</p>
<p>环境与工具：</p>
<blockquote>
<p>Ubuntu16.04 64bit<br>
Pycharm<br>
Anaconda3<br>
bs4</p>
</blockquote>
<h5 id="流程图">流程图</h5>
<p><img src="http://dataimage-1252464519.costj.myqcloud.com/images/Spider/douban%20/1.png" alt></p>
<h5 id="源码">源码</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取一个评论列表页面的网页数据</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">url</span>):</span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.94 Safari/537.36&quot;</span>&#125;</span><br><span class="line">    data = requests.get(url, headers=headers).text</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取页面中影评标题及链接</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_data_bs</span>(<span class="params">data</span>):</span><br><span class="line">    title_data_d = &#123;&#125;</span><br><span class="line">    bsObj = BeautifulSoup(data, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    review_lists = bsObj.findAll(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="string">&#x27;typeof&#x27;</span>:<span class="string">&quot;v:Review&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> review_lists:</span><br><span class="line">        title_data = item.find(<span class="string">&#x27;h3&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;title&#x27;</span>&#125;)</span><br><span class="line">        <span class="comment"># 这里多次使用replace可用正则表达式代替，这里省略，详情参考站内正则表达式python版的总结</span></span><br><span class="line">        title = title_data.get_text().replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        title_href = title_data.find(<span class="string">&#x27;a&#x27;</span>).get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">        title_data_d[title] = title_href</span><br><span class="line">    <span class="keyword">return</span> title_data_d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据评论标题链接抓取评论内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_comment_data</span>(<span class="params">comment_url</span>):</span><br><span class="line">    comment_data = get_data(comment_url)</span><br><span class="line">    bsObj = BeautifulSoup(comment_data, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    <span class="comment"># print(bsObj)</span></span><br><span class="line">    <span class="comment"># author data</span></span><br><span class="line">    p_name = bsObj.find(<span class="string">&#x27;header&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;main-hd&#x27;</span>&#125;).find(<span class="string">&#x27;a&#x27;</span>).find(<span class="string">&#x27;span&#x27;</span>).get_text()</span><br><span class="line">    p_url = bsObj.find(<span class="string">&#x27;header&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;main-hd&#x27;</span>&#125;).find(<span class="string">&#x27;a&#x27;</span>).get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">    <span class="comment"># comment data</span></span><br><span class="line">    c_date = bsObj.find(<span class="string">&#x27;span&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;main-meta&#x27;</span>&#125;).get_text()</span><br><span class="line">    <span class="comment"># c_rank提取中发现查看源码发现与检查元素不符合</span></span><br><span class="line">    <span class="comment"># 有些用户未评分</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        c_rank = bsObj.find(<span class="string">&#x27;span&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;main-title-hide&quot;</span>&#125;).get_text()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        c_rank = <span class="literal">None</span></span><br><span class="line">    c_comment = bsObj.find(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="string">&#x27;property&#x27;</span>: <span class="string">&#x27;v:description&#x27;</span>&#125;).get_text()</span><br><span class="line">    <span class="comment"># 有用，无用</span></span><br><span class="line">    useful = bsObj.find(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;main-panel-useful&#x27;</span>&#125;).find_all(<span class="string">&#x27;button&#x27;</span>)</span><br><span class="line">    y_use = useful[<span class="number">0</span>].get_text().replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27; &#x27;</span>)[<span class="number">5</span>]</span><br><span class="line">    n_use = useful[<span class="number">1</span>].get_text().replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27; &#x27;</span>)[<span class="number">5</span>]</span><br><span class="line">    comment_data = [p_name, p_url, c_date, c_comment, c_rank, y_use, n_use]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> comment_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_table</span>():</span><br><span class="line">    db = pymysql.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;密码不给看&quot;</span>, <span class="string">&quot;USpiderData&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    cursor = db.cursor()</span><br><span class="line">    cursor.execute(<span class="string">&quot;DROP TABLE IF EXISTS DouBan&quot;</span>)</span><br><span class="line">    <span class="comment"># p_name, p_url, c_date, c_data, c_rank, y_use, n_use</span></span><br><span class="line">    cursor.execute(<span class="string">&quot;CREATE TABLE DouBan(p_name VARCHAR(20), p_url VARCHAR(100), &quot;</span></span><br><span class="line">                   <span class="string">&quot;c_date VARCHAR (20), c_comment VARCHAR (20000), c_rank VARCHAR (5), &quot;</span></span><br><span class="line">                   <span class="string">&quot;y_use VARCHAR (10), n_use VARCHAR (10));&quot;</span>)  <span class="comment"># 创建表</span></span><br><span class="line">    db.commit()</span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_to_mysql</span>(<span class="params">cursor, db, commemt_data</span>):</span><br><span class="line">    <span class="comment"># try:</span></span><br><span class="line">    sql = <span class="string">&#x27;INSERT INTO DouBan(p_name, p_url, c_date, c_comment, c_rank, y_use, n_use)VALUES(%s,%s,%s,%s,%s,%s,%s)&#x27;</span></span><br><span class="line">    <span class="comment"># cursor.execute(sql, (commemt_data[0], commemt_data[1], commemt_data[2], commemt_data[3], commemt_data[4], commemt_data[5], commemt_data[6]))</span></span><br><span class="line">    cursor.execute(sql, [commemt_data[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>)])</span><br><span class="line">    <span class="comment"># 提交事务</span></span><br><span class="line">    db.commit()</span><br><span class="line">    <span class="built_in">print</span>(commemt_data[<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># except:</span></span><br><span class="line">    <span class="comment">#     print(&#x27;Save fail...&#x27;)</span></span><br><span class="line">    <span class="comment">#     pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main_spider</span>(<span class="params">list_url</span>):</span><br><span class="line">    db = pymysql.connect(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;密码不给看&quot;</span>, <span class="string">&quot;USpiderData&quot;</span>, charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    cursor = db.cursor()</span><br><span class="line">    page_data = get_data(list_url)</span><br><span class="line">    <span class="comment"># https: // movie.douban.com/subject/26616436/reviews</span></span><br><span class="line">    titles_data = parse_data_bs(page_data)</span><br><span class="line">    <span class="comment"># print(titles_data)</span></span><br><span class="line">    <span class="keyword">for</span> comment_title, comment_url <span class="keyword">in</span> titles_data.items():</span><br><span class="line">        comment_data = get_comment_data(comment_url)</span><br><span class="line">        <span class="comment"># print(comment_data)</span></span><br><span class="line">        save_to_mysql(cursor, db, comment_data)</span><br><span class="line"></span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_all_list_urls</span>():</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&#x27;https://movie.douban.com/subject/1292052/reviews?start=%s&#x27;</span>%(v) <span class="keyword">for</span> v <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4300</span>, <span class="number">20</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    create_table()</span><br><span class="line">    list_urls = get_all_list_urls()</span><br><span class="line">    error_link = []</span><br><span class="line">    <span class="keyword">for</span> list_url <span class="keyword">in</span> list_urls:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            main_spider(list_url)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            error_link.append(list_url)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(error_link) &gt; <span class="number">10</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;ERROR!!!&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;OK!&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/02/%E8%B1%86%E7%93%A3%E5%BD%B1%E8%AF%84%E7%88%AC%E5%8F%96/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://datahonor.com/2017/03/02/Ubuntu%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/17157965?v=3&u=1787d5d04d50967c7825062bfff705ee584ae2b2&s=400">
      <meta itemprop="name" content="Mathew Shen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DATA HONOR">
      <meta itemprop="description" content="十年饮冰，难凉热血。">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | DATA HONOR">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/03/02/Ubuntu%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF/" class="post-title-link" itemprop="url">Ubuntu命令积累</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-03-02 17:03:54" itemprop="dateCreated datePublished" datetime="2017-03-02T17:03:54+08:00">2017-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-03-13 12:35:03" itemprop="dateModified" datetime="2022-03-13T12:35:03+08:00">2022-03-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2017/03/02/Ubuntu%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/03/02/Ubuntu%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="查看CPU及内存">查看CPU及内存</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">或者</span><br><span class="line">sudo apt-get install htop</span><br><span class="line">htop</span><br></pre></td></tr></table></figure>
<h5 id="查看网络">查看网络</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查看网卡</span><br><span class="line">​ ifconfig</span><br><span class="line"># 查看网络状况</span><br><span class="line">​ sudo apt-get install slurm</span><br><span class="line">​ slurm -i wlan0    # wlan0是指定的网卡</span><br></pre></td></tr></table></figure>
<h5 id="重启-关闭网络服务">重启&amp;关闭网络服务</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 重启</span><br><span class="line">service network-manager restart</span><br><span class="line"></span><br><span class="line"># 关闭</span><br><span class="line">service network-manager stop</span><br></pre></td></tr></table></figure>
<blockquote>
<p>发现中大校园网认证在Linux客户端会先停掉network-manager再进行认证。开始还可以正常连接上网，后面连接成功了但是无法上网，重启下network-manager之后再连接可以。</p>
</blockquote>
<h5 id="登录到远程服务器">登录到远程服务器</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -l root 45.77.14.149</span><br></pre></td></tr></table></figure>
<p>指定端口</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/03/02/Ubuntu%E5%91%BD%E4%BB%A4%E7%A7%AF%E7%B4%AF/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/archives/page/14/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/archives/">1</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/archives/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/18/">18</a><a class="extend next" rel="next" href="/archives/page/16/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mathew Shen</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>




<script class="next-config" data-name="valine" type="application/json">{"enable":true,"appId":"qzF75hQvs6yPkMIO7gd7LwDB-gzGzoHsz","appKey":"foULNoeGLTL8LE8C2Ysitv5I","serverURLs":["datahonor.com"],"placeholder":"毕竟今天太阳那么好~(评论时留下邮箱才能收到回复提醒的邮件哦)","avatar":"","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":false,"comment_count":true,"recordIP":true,"enableQQ":true,"requiredFields":["nick"],"notify":true,"el":"#valine-comments","path":"/archives/page/15/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.valine.el)
    .then(() => NexT.utils.getScript(
      'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js',
      { condition: window.Valine }
    ))
    .then(() => {
      new Valine(CONFIG.valine);
    });
});
</script>

</body>
</html>
